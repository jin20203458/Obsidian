
프로세스 자원모델
- **요청(Request)**: 프로세스가 특정 자원을 사용하려고 요청합니다. 요청한 자원이 사용 중이면, 해당 프로세스는 자원을 사용할 수 있을 때까지 대기 상태로 들어갑니다.
    
- **사용(Use)**: 자원이 할당되면 프로세스는 그 자원을 사용하여 작업을 수행합니다.
    
- **해제(Release)**: 작업을 마친 후 자원을 해제하며, 대기 중인 다른 프로세스가 있으면 자원을 사용할 수 있도록 알립니다.

**교착상태(Deadlock)**는 두 개 이상의 작업이나 프로세스가 서로 다른 작업이 자원을 해제할 때까지 기다리는 상황을 말하며, 이로 인해 시스템 내에서 작업이 영구적으로 정지하게 됩니다. 예를 들어, 프로세스 A가 자원 1을 점유하고 자원 2를 기다리고 있는 동안, 프로세스 B는 자원 2를 점유하고 자원 1을 기다리는 상태가 지속되면 교착상태가 발생합니다.

**기아(Starvation)** 또는 **무한 대기**는 특정 작업이나 프로세스가 자원 할당 우선순위에서 계속 밀리면서 필요한 자원을 확보하지 못하고 영구적으로 대기하는 상태를 뜻합니다. 기아가 발생하면 해당 프로세스가 자원 할당에서 계속 제외되어 실행되지 않지만, 시스템 전체의 작업은 여전히 진행됩니다.

### 차이점

- **영구 정지 여부**: 교착상태는 여러 프로세스가 서로 자원을 기다리면서 시스템 전체가 정지하지만, 기아는 특정 프로세스만 대기하고 다른 작업은 계속 진행됩니다.
- **원인**: 교착상태는 자원 상호 의존에 의해 발생하며, 기아는 자원 할당 우선순위 불균형(OS의 잘못된 정책) 때문에 발생합니다.

**교착 상태 발생 조건**
1. 상호배제: 한 프로세스가 사용하는 자원을 다른 프로세스가 사용불가능 상태
2. 점유와 대기: 자원을 할당받고 나머지 자원의 할당을 기다리는 상태
3. 비선점: 다른 프로세스의 자원을 뺏을수 없는 상태
4. 원형 대기: 자원을 기다리며 원형으로 서로를 대기하는 상태
4가지 조건중 하나라도 만족하지 않는다면 교착상태는 발생 x 모두 만족하면 발생가능

#### 해결법

**예방  : 애초에 교착 상태가 발생하지 않도록 발생조건을 없애버림**
- 공유자원 문제 때문에 상호배제를 제외한
- 하벤더(Havender)가 제시한 방안

점유와 대기방지 : 특정 프로세스에 자원을 모두 할당하거나, 아예 할당하지 않음
- 자원이 없어야만 요청이 가능하게
- 자원의 활용율 저하

비선점방지 : 자원을 선점가능하게 
- 요구가 거절당하면 가진 자원을 반납하게(반납된 자원은 다른놈이 씀:선점)
- 모든 자원이 선점가능하지 않음
- 중간 처리물등이 무효화되며 효율성 격하

횐형대기방지 : 모든자원에 번호를 붙이고 오름차순으로 할당
- 꼬리가 머리를 무는? 현상을 방지함 
- 자원에 번호를 붙이는것은 쉬운작업이 아니다.


**회피: 교착상태가 발생할꺼 같으면 자원할당 X** 

- 교착 상태를 무분별한 자원할당으로 인해 발생했다고 간주
- 시스템이 교착상태에 빠지지 않도록 **자원 할당 전에 미리 검사**하여 안전한 상태에서만 자원을 할당하는 방식 ex) 다익스트라의 은행가 알고리즘


안전 순서열 : 모든 프로세스가 교착상태 없이 **순차적으로 완료될 수 있는 자원 할당 순서**

안전 상태     : 시스템이 자원을 현재 상태로 할당해도 **적어도 하나의 안전 순서열이 존재**하여 교착상태 없이 모든 프로세스를 완료할 수 있는 상태(이때만 자원 할당)

불안정 상태 : 자원을 현재 상태로 할당할 경우 **교착상태가 발생할 가능성이 있는 상태**

은행가 알고리즘 : 자원을 요청할 때마다 시스템이 **교착상태에 빠지지 않는지** 확인한 후 자원을 할당하는 방법. 자원을 할당해도 다른 프로세스들이 모두 끝날 수 있는지 검사하고, 안전하다면 자원을 주고, 그렇지 않으면 거절


**교착상태 검출 후 회복**

**자원 할당 그래프**나 **자원 할당 테이블**을 사용하여 교착 상태를 탐지,회복

#### 2.1. **프로세스 종료**

교착 상태를 해결하기 위해, 교착 상태에 빠진 프로세스를 종료하는 방법입니다. 이를 통해 자원을 회수하고, 다른 프로세스가 자원을 사용할 수 있도록 합니다.

- **하나의 프로세스 종료**: 교착 상태를 해결하기 위해 교착 상태에 연관된 프로세스 중 하나를 종료합니다. 이 경우, 종료된 프로세스가 할당한 자원은 시스템에 반환되며, 다른 프로세스가 자원을 사용할 수 있게 됩니다.
    
    - 종료할 프로세스를 선택하는 기준은 여러 가지가 있을 수 있습니다. 예를 들어, **가장 적게 자원을 소모한 프로세스**나 **가장 최근에 자원을 요청한 프로세스**를 종료하는 방법 등이 있습니다.
- **모든 프로세스 종료**: 일부 경우에는 교착 상태에 연루된 모든 프로세스를 종료하고, 시스템을 초기화하는 방법도 있습니다. 이 방법은 극단적인 경우에 사용되며, 비용이 많이 들고 효율적이지 않지만 교착 상태를 완전히 제거할 수 있습니다.
    

#### 2.2. **자원 회수**

교착 상태를 해결하기 위해 자원을 강제로 회수하는 방법입니다. 이는 교착 상태에 연루된 프로세스가 자원을 반납하도록 강제하는 방식입니다.

- **자원 강제 회수**: 교착 상태에 있는 프로세스 중 일부가 보유하고 있는 자원을 강제로 회수하여 다른 프로세스에 할당할 수 있습니다. 이 방법은 프로세스를 종료하지 않고 자원을 회수하는 방식입니다.
    - 예를 들어, 프로세스가 자원을 반환하지 않으면 시스템이 이를 강제로 종료하고 자원을 회수할 수 있습니다.
- **프로세스에 자원 회수 요청**: 자원을 할당받은 프로세스에 특정 자원을 반환하도록 요청할 수 있습니다. 하지만 프로세스가 자원을 반환하지 않으면 회복이 어려운 경우가 있을 수 있습니다.

#### 2.3. **프로세스 우선순위 조정**

교착 상태를 해결하기 위해 프로세스들의 **우선순위를 조정**하는 방법입니다. 특정 프로세스가 다른 프로세스를 기다리게 할 때, 우선순위가 낮은 프로세스를 강제로 종료하거나, 우선순위를 변경하여 자원의 소모를 조절할 수 있습니다.

#### 2.4. **예방적 회복**

교착 상태가 발생한 후에 회복하는 것이 아니라, 교착 상태가 발생하지 않도록 예방하는 방법입니다. 이 방법은 교착 상태가 발생할 가능성을 미리 차단하는 방식입니다. 예를 들어, 자원의 할당 규칙을 설정하거나, 프로세스가 특정 자원을 일정 시간 내에만 사용하도록 제한하는 등의 방법이 있습니다.



교착상태 무시 : 교착 상태가 발생했을 때 이를 아예 처리하지 않고 무시