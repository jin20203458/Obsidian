
**CRTP(Curiously Recurring Template Pattern)**ëŠ” ì´ë¦„ë¶€í„° ì¢€ ì´ìƒí•˜ì£ ? â€œê¸°ë¬˜í•˜ê²Œ ë˜í’€ì´ë˜ëŠ” í…œí”Œë¦¿ íŒ¨í„´â€ì´ë¼ëŠ” ëœ»ì¸ë°, C++ì—ì„œ **ì •ì  ë‹¤í˜•ì„±(static polymorphism)**ì„ êµ¬í˜„í•  ë•Œ ìì£¼ ì“°ì´ëŠ” ê°•ë ¥í•œ ê¸°ë²•ì´ì—ìš”.

```cpp
template <typename Derived>
class Base 
{
public:
    void interface() 
    {
        // íŒŒìƒ í´ë˜ìŠ¤ì˜ êµ¬í˜„ì„ í˜¸ì¶œ
        static_cast<Derived*>(this)->implementation();
    }
};

class Derived : public Base<Derived> 
{
public:
    void implementation()
     {
        std::cout << "Derived implementation\n";
    }
};
```
- `Base` â†’ ê¸°ë³¸ í´ë˜ìŠ¤ê°€ íŒŒìƒ í´ë˜ìŠ¤ë¥¼ ì•Œê³  ìˆìŒ
- `Derived`ëŠ” `Base`ë¥¼ ìƒì† â†’ **ìê¸° ìì‹ ì„ ì¸ìë¡œ ë„˜ê¹€**
- `interface()`ëŠ” `Derived`ì˜ `implementation()`ì„ í˜¸ì¶œ â†’ **ì •ì  ë‹¤í˜•ì„±**

---

ğŸ” ì™œ ì“°ë‚˜ìš”?

|ëª©ì |ì„¤ëª…|
|---|---|
|**ì •ì  ë‹¤í˜•ì„±**|ê°€ìƒ í•¨ìˆ˜ ì—†ì´ë„ íŒŒìƒ í´ë˜ìŠ¤ì˜ ë©”ì„œë“œë¥¼ í˜¸ì¶œ ê°€ëŠ¥|
|**ì„±ëŠ¥ í–¥ìƒ**|ëŸ°íƒ€ì„ ì˜¤ë²„í—¤ë“œ(vtable, ê°€ìƒ í˜¸ì¶œ) ì—†ì´ ì»´íŒŒì¼ íƒ€ì„ì— ê²°ì •ë¨|
|**ë¯¹ìŠ¤ì¸(Mixin)**|ê³µí†µ ê¸°ëŠ¥ì„ í…œí”Œë¦¿ ê¸°ë°˜ìœ¼ë¡œ ì¬ì‚¬ìš© ê°€ëŠ¥|
|**ì •ì  ì¸í„°í˜ì´ìŠ¤**|íŒŒìƒ í´ë˜ìŠ¤ê°€ íŠ¹ì • ë©”ì„œë“œë¥¼ êµ¬í˜„í•˜ë„ë¡ ê°•ì œ ê°€ëŠ¥|

---

ğŸ§ª ì˜ˆì‹œ: ê°ì²´ ìˆ˜ ì„¸ê¸°

```cpp
template <typename T>
class ObjectCounter {
public:
    static int count;
    ObjectCounter() { ++count; }
    ~ObjectCounter() { --count; }
};

template <typename T>
int ObjectCounter<T>::count = 0;

class MyClass : public ObjectCounter<MyClass> {};
```
- `MyClass` ê°ì²´ê°€ ìƒì„±/ì†Œë©¸ë  ë•Œë§ˆë‹¤ `count`ê°€ ì¦ê°€/ê°ì†Œ
- `ObjectCounter`ëŠ” `MyClass` ì „ìš© ì¹´ìš´í„°ê°€ ë¨

---

âš ï¸ ì£¼ì˜í•  ì 

- **ë³µì¡í•´ ë³´ì¼ ìˆ˜ ìˆìŒ**: ì²˜ìŒ ë³´ë©´ â€œì™œ ìê¸° ìì‹ ì„ ì¸ìë¡œ ë„˜ê¸°ì§€?â€ ì‹¶ì–´ìš”
- **í…œí”Œë¦¿ ì¸ìŠ¤í„´ìŠ¤ê°€ ë§ì•„ì§€ë©´ ì½”ë“œ ë¶€í’€ê¸°(code bloat)** ê°€ëŠ¥ì„± ìˆìŒ
- **ëŸ°íƒ€ì„ ë‹¤í˜•ì„±ì€ ë¶ˆê°€ëŠ¥**: `Base*`ë¡œëŠ” ì—¬ëŸ¬ íƒ€ì…ì„ ë‹´ì„ ìˆ˜ ì—†ìŒ

---

âœ… ìš”ì•½

|íŠ¹ì§•|ì„¤ëª…|
|---|---|
|êµ¬ì¡°|`class Derived : public Base`|
|ì¥ì |ì •ì  ë‹¤í˜•ì„±, ì„±ëŠ¥, ë¯¹ìŠ¤ì¸ êµ¬í˜„|
|ë‹¨ì |ë³µì¡ì„±, ì½”ë“œ ë¶€í’€ê¸°, ëŸ°íƒ€ì„ ë‹¤í˜•ì„± ë¶ˆê°€|

