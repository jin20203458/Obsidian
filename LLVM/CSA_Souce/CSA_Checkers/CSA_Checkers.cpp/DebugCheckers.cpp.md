
> Clang 정적 분석기는 코드를 분석하기 위해 여러 복잡한 중간 표현과 데이터 구조를 사용합니다. 예를 들어, 제어 흐름 그래프(CFG), 호출 그래프(Call Graph), 지배 트리(Dominator Tree) 등이 있습니다. `DebugCheckers.cpp`에 정의된 체커들은 이러한 내부 데이터 구조를 텍스트나 그래픽 형태로 출력하여 개발자가 분석기가 어떻게 동작하는지, 특정 분석 단계의 결과가 올바른지 등을 쉽게 확인할 수 있게 해줍니다.



## 1. 함수 내부 구조 시각화 (Flowcharts & Blueprints)

## `CFGViewer` / `CFGDumper` (제어 흐름 그래프)

- **직관적으로 말하면:** 함수의 **실행 흐름 지도** 또는 **플로우차트**를 보여줍니다.
    
- **비유:** "선택에 따라 이야기가 달라지는 책"의 모든 선택지를 한눈에 볼 수 있는 지도와 같습니다.
    

**예시 코드:**
```cpp
void test(int x) 
{
  if (x > 10) 
  {
    A();
  } 
  else 
  {
    B();
  }
  C();
}
```

**`CFGViewer`가 보여주는 것 (시각화):**
```cpp
      [ B1: if (x > 10) ]
          /         \
 (true)  /           \ (false)
        V             V
  [ B2: A(); ]    [ B3: B(); ]
         \         /
          \       /
           V     V
         [ B4: C(); ]
```


## `DominatorsTreeDumper` (지배 트리)

- **직관적으로 말하면:** 어떤 코드를 실행하려면 **반드시 먼저 거쳐야 하는 관문**이 무엇인지 보여줍니다.
    
- **비유:** 게임 맵에서 '보스 방'에 가려면 반드시 '중간 보스 방'을 통과해야 하는 것과 같습니다. '중간 보스 방'이 '보스 방'을 "지배(dominate)"합니다.
    

**위 예시 코드에서:**

- `B1` (if문)은 `B2`, `B3`, `B4`를 모두 지배합니다. 어디로 가든 `B1`을 거쳐야 합니다.
    
- `B4` (C() 호출)는 누구도 지배하지 않습니다.
    

**`DominatorsTreeDumper`가 보여주는 것 (계층 구조):**
```scss
[ B1 ] dominates [ B2, B3, B4 ]
```
> **언제 사용하나요?** "특정 코드 위치에 도달하기 위해 필수적인 선행 코드가 무엇인지 분석할 때" 사용합니다. 컴파일러 최적화에 주로 쓰입니다.

## 2. 데이터 흐름 추적 (Ingredient Tracking)

## `LiveVariablesDumper` (라이브 변수)

- **직관적으로 말하면:** 코드의 특정 지점에서 "앞으로 사용될 가능성이 있는" **살아있는 변수**가 무엇인지 알려줍니다.
    
- **비유:** 요리사가 요리할 때, `int x = 5;`는 '계란'을 꺼내놓는 것과 같습니다. `y = x + 2;`에서 계란을 사용하고, 만약 그 뒤로 계란을 더 쓰지 않는다면 그 계란은 더 이상 "살아있지(live)" 않습니다.
    

**예시 코드:**
```cpp
void test() {
  int x = 10;
  int y = 20;
  y = x + 5; // <-- 이 지점
  printf("%d", y);
}
```
**`LiveVariablesDumper`가 `y = x + 5;` 직전에 보여주는 것:**

- `x`는 바로 다음 줄에서 사용되므로 **살아있습니다 (Live)**.
    
- `y`는 값을 새로 할당받기만 하고 이전 값은 사용되지 않으므로, 이 시점에는 **죽어있습니다 (Dead)**.
    

> **언제 사용하나요?** "초기화되지 않은 변수를 사용하거나, 값을 할당한 뒤 전혀 사용하지 않는 변수를 찾을 때" 그 기반이 되는 분석 결과를 확인하는 데 사용합니다.

## 3. 프로그램 전체 구조 파악 (Organization Chart)

## `CallGraphViewer` / `CallGraphDumper` (호출 그래프)

- **직관적으로 말하면:** 프로그램 전체에서 **어떤 함수가 어떤 함수를 호출하는지** 관계도를 보여줍니다.
    
- **비유:** 회사의 **조직도**와 같습니다. 누가 누구에게 일을 시키는지(호출하는지) 보여주지만, 구체적인 업무 내용(코드)까지는 보여주지 않습니다.
    

**예시 코드:**
```cpp
void A() { B(); }
void B() { C(); }
void C() {}
void main() { A(); }
```

**`CallGraphViewer`가 보여주는 것 (시각화):**
```scss
  [ main ] -> [ A ] -> [ B ] -> [ C ]
```
> **언제 사용하나요?** "프로그램의 전체적인 아키텍처를 파악하거나, 예상치 못한 함수 호출 관계(예: 재귀 호출)가 있는지 확인할 때" 사용합니다.

## 4. 분석기 내부 동작 들여다보기 (Analyzer's Brain)

## `ExplodedGraphViewer` (폭발 그래프) - **가장 강력한 디버깅 도구**

- **직관적으로 말하면:** 정적 분석기가 코드를 분석하며 탐색한 **모든 가능한 경로와 각 경로에서의 변수 상태**를 시각화한 궁극의 지도입니다.
    
- **비유:** 체스 AI가 다음 수를 두기 위해 머릿속으로 그려보는 **수천 개의 가능한 게임 진행 경로 트리**와 같습니다. 각 노드는 체스판의 상태(`x=5, ptr=null`), 엣지는 하나의 수(코드 한 줄 실행)를 의미합니다. "폭발(Exploded)"이라는 이름은 경로의 수가 기하급수적으로 늘어나기 때문에 붙었습니다.
    

**예시 코드:**
```cpp
void test(int *p) 
{
  if (p) 
  {
    *p = 0; // 경로 1: p가 null이 아님
  }
  // 경로 2: p가 null임 (분기)
}
```
**`ExplodedGraphViewer`가 보여주는 것 (시각화):**

1. **시작 노드:** `{ p = (심볼릭 값 S) }`
    
2. `if (p)`에서 두 갈래로 "폭발"
    
    - **경로 1 (True):** `{ p = S (non-null 가정) }` -> `*p = 0` 실행 -> `{ *S = 0 }`
        
    - **경로 2 (False):** `{ p = S (null 가정) }` -> 아무것도 안 함
        

> **언제 사용하나요?** "왜 분석기가 이 버그를 못 찾았지?" 또는 "분석기가 어떤 잘못된 가정을 해서 엉뚱한 경로로 갔지?"와 같이, **분석기 자체의 동작 원리를 디버깅**할 때 사용합니다. 분석기의 '생각'을 엿볼 수 있는 가장 중요한 도구입니다.

## 요약 테이블

| 체커 (Checker)              | 하는 일              | 비유                      | 언제 사용하나요?                                  |
| ------------------------- | ----------------- | ----------------------- | ------------------------------------------ |
| **`CFGViewer`**           | 함수 내 실행 흐름 지도     | 플로우차트, 선택형 어드벤처 게임 지도   | 함수의 기본 구조와 분기 흐름을 시각적으로 파악하고 싶을 때          |
| **`LiveVariablesDumper`** | 변수가 앞으로 쓰일지 여부    | 요리사의 작업대에 놓인 '살아있는' 재료  | 변수 사용 분석(초기화, 사용 후 미사용 등)의 내부 결과를 볼 때      |
| **`CallGraphViewer`**     | 함수 간 호출 관계도       | 회사 조직도                  | 프로그램 전체의 아키텍처나 함수 간의 상호작용을 보고 싶을 때         |
| **`ExplodedGraphViewer`** | 분석기의 모든 탐색 경로와 상태 | 체스 AI의 생각 회로, 모든 가능한 미래 | 분석기가 왜 특정 결론에 도달했는지 그 '사고 과정'을 추적하고 디버깅할 때 |
| **`ConfigDumper`**        | 분석기 설정 값 목록       | 자동차 경주 전 차량 설정표         | 분석기가 현재 어떤 설정으로 동작하는지 확인하고 싶을 때            |