### **OSI 7계층 표 (전송 단위 포함)**

|**계층 번호**|**계층 이름**|**영문 이름**|**주요 역할**|**예시 프로토콜/기술**|**전송 단위**|
|---|---|---|---|---|---|
|7|**응용 계층**|Application Layer|- 사용자와 네트워크 간 인터페이스 제공  <br>- 애플리케이션 간 데이터 교환 지원|HTTP, HTTPS, FTP, SMTP, POP3, IMAP, DNS|**데이터(Data)**|
|6|**표현 계층**|Presentation Layer|- 데이터 형식 변환 (텍스트, 이미지, 동영상)  <br>- 암호화 및 압축 처리|JPEG, GIF, ASCII, SSL/TLS, MPEG|**데이터(Data)**|
|5|**세션 계층**|Session Layer|- 통신 세션 관리 (설정, 유지, 종료)  <br>- 체크포인트, 동기화 관리|NetBIOS, RPC, PPTP|**데이터(Data)**|
|4|**전송 계층**|Transport Layer|- 신뢰성 있는 데이터 전송  <br>- 데이터 분할 및 재조립  <br>- 흐름 제어, 오류 제어|TCP, UDP|**세그먼트(Segment)**|
|3|**네트워크 계층**|Network Layer|- 패킷 라우팅 및 논리적 주소(IP) 관리  <br>- 서로 다른 네트워크 간 데이터 전송|IP, ICMP, ARP, RIP, OSPF, BGP|**패킷(Packet)**|
|2|**데이터 링크 계층**|Data Link Layer|- 물리적 전송의 신뢰성 보장  <br>- 프레임 생성 및 오류 탐지/수정  <br>- MAC 주소 관리|Ethernet, PPP, Wi-Fi (802.11), ARP, L2TP|**프레임(Frame)**|
|1|**물리 계층**|Physical Layer|- 물리적 장치 간 데이터 전송  <br>- 전기적 신호, 광 신호, 전송 매체 관리|RS-232, USB, IEEE 802.3 (Ethernet), 광섬유, 동축 케이블|**비트(Bit)**|
### TCP/IP 5계층 모델

|계층|역할|프로토콜 예시|설명|
|---|---|---|---|
|1. 물리 계층|데이터 전송 매체 연결|LAN 케이블, 광섬유|실제 데이터 전송을 위한 하드웨어적 연결|
|2. 데이터 링크 계층|물리적인 주소 지정 및 오류 제어|이더넷, Wi-Fi|MAC 주소 기반 데이터 전송 및 오류 검출|
|3. 네트워크 계층|경로 설정 및 논리적 주소 지정|IPv4, IPv6|IP 주소를 사용해 목적지까지 데이터 전달|
|4. 전송 계층|데이터 흐름 제어 및 신뢰성 제공|TCP, UDP|송수신 간 데이터 전송 방식 및 오류 제어|
|5. 응용 계층|사용자와 직접 상호작용|HTTP, FTP, SMTP|사용자에게 서비스 제공 (웹, 이메일 등)|
- 네트워크 장비를 통해 LAN을 구성(MAC 주소로 통신)
- LAN을 뭉쳐서 WAN을 구성(IP주소로 통신 ,ARP로 변환)


- 라우터는 감당하지 못하는 처리량이 생기면, 버리거나 메모리에 누적(장기간 지속시 재부팅)시킨다.

전송속도 : 두 기기간 초당 전송될 수 있는 최대 데이터양
레이턴시 : 두 기기간 데이터를 최소량 전송할때 걸리는 시간


**CSMA (Carrier Sense Multiple Access)**는 여러 장치가 공유하는 통신 매체에서 **충돌을 방지하고 효율적인 데이터 전송**을 위해 사용되는 **접근 제어 방식**

- **Carrier Sense (매체 감지)**:
    - 데이터 전송을 시작하기 전에, 각 장치는 통신 매체가 **비어있는지** 또는 **다른 장치가 데이터를 전송 중인지** 확인합니다. 즉, 네트워크 채널에 **신호가 흐르고 있는지** 확인하여, 다른 장치가 데이터를 전송하고 있으면 기다립니다.
- **Multiple Access (다중 접근)**:
    - 여러 장치가 동일한 통신 채널을 **공유**하여 데이터를 전송할 수 있습니다. 하지만 충돌을 피하기 위해 각 장치는 채널을 사용할 수 있는 시점을 조심스럽게 결정해야 합니다.


### TCP
- **TCP (Transmission Control Protocol)**: 신뢰성 있는 연결 지향 프로토콜로, 데이터 전송의 정확성과 순서를 보장합니다.
![[Pasted image 20250305001628.png]]
- **TCP 스트림:**  
  TCP(Stream)는 연결지향형 프로토콜로, 데이터를 **연속적인 바이트 흐름**(Stream) 형태로 전송합니 다. 데이터의 순서를 보장하고, 손실된 데이터는 재전송하여 신뢰성을 높입니다. 따라서 파일 전송이나 웹사이트 접속처럼 데이터의 정확성이 중요한 통신에 사용됩니다.

**3-Way Handshake**
데이터 전송을 시작하기 전에 송신자와 수신자가 **연결을 설정하는 과정
✅ **과정 설명:**

1. **SYN (Synchronize)**: 클라이언트가 서버에게 연결 요청을 보냅니다.
2. **SYN + ACK (Acknowledge)**: 서버가 요청을 승인하고 연결 수락 신호를 보냅니다.
3. **ACK (Acknowledge)**: 클라이언트가 서버의 승인 신호를 확인합니다.
➡️ 연결이 완료되면 데이터 전송이 시작됩니다.

TCP 연결을 **정상적으로 종료**하는 과정
✅ **과정 설명:**

1. **FIN (Finish)**: 클라이언트가 서버에게 데이터 전송 종료 신호를 보냅니다.
2. **ACK**: 서버가 클라이언트의 종료 신호를 확인합니다.
3. **FIN**: 서버가 자신의 데이터 전송이 끝났음을 알립니다.
4. **ACK**: 클라이언트가 서버의 종료 신호를 확인합니다.
➡️ 이후 일정 시간이 지나면 연결이 완전히 종료됩니다.


### UDP

- **UDP (User Datagram Protocol)**: 신뢰성 없는 비연결형 프로토콜로, 빠른 데이터 전송을 우선시하며 순서 보장이나 오류 검출이 없습니다.
- **UDP 데이터그램:**  
  UDP(Datagram)는 비연결형 프로토콜로, 데이터를 **독립적인 패킷 단위(데이터그램)**로 전송합니다. 데이터의 순서 보장이나 재전송 기능이 없기 때문에 전송 속도가 빠르지만 신뢰성은 낮습니다. 실시간 스트리밍이나 온라인 게임처럼 속도가 중요한 통신에 사용됩니다.


**IPv4:**  
IPv4는 32비트 주소체계를 사용하는 인터넷 프로토콜로, 최대 약 **43억 개의 주소**를 제공합니다. 일반적으로 **점(.)으로 구분된 4개의 숫자(예: 192.168.0.1)** 형태로 표현됩니다.

**IPv6:**  
IPv6는 IPv4의 주소 부족 문제를 해결하기 위해 개발된 프로토콜로, **128비트 주소체계**를 사용하여 사실상 무한에 가까운 주소를 제공합니다. **콜론(:)으로 구분된 8개의 숫자(예: 2001:db8::1)** 형태로 표현됩니다.

**포트번호:**  
포트번호는 컴퓨터에서 동작하는 **프로그램(프로세스)을 구분하기 위한 번호**입니다. 예를 들어, 웹 서버는 기본적으로 **80번 포트(HTTP)**나 **443번 포트(HTTPS)**를 사용합니다. IP 주소와 포트번호가 함께 사용되어 네트워크에서 특정 서비스를 식별합니다.

- 전송속도(처리량:Throughput): 데이터 전송의 **양**
- 지연시간(latency): 데이터 전송의 **시간**
- 패킷 유실률 : 전송되는 데이터가 중간에 버려지는 비율


### **공유기의 작동 과정**

1. **공인 IP 할당 (WAN 포트)**
    
    - 인터넷 서비스 제공업체(ISP)로부터 **공인 IP**(전 세계에서 유일한 IP)를 하나 받습니다.
    - 이 IP는 공유기가 외부 인터넷과 통신할 때 사용됩니다.
2. **사설 IP 할당 (LAN 포트)**
    
    - 공유기는 내부 네트워크에 연결된 기기들에게 **사설 IP(192.168.x.x 또는 10.x.x.x)**를 자동으로 할당합니다.
    - 이 과정은 보통 **DHCP 서버** 기능을 통해 자동으로 이루어집니다.
3. **NAT (Network Address Translation)**
    
    - 내부에서 보내는 데이터 패킷의 **사설 IP**를 **공인 IP**로 변환합니다.
    - 데이터가 외부 서버에 도달하면, 외부에서는 **공유기의 공인 IP**만 보입니다.
    - 응답 데이터가 돌아올 때는 공유기가 다시 **사설 IP**로 변환하여 원래 기기로 전달합니다.
4. **포트포워딩**
    
    - 특정 포트를 지정하여 외부에서 내부 기기로 직접 접근할 수 있도록 설정합니다.  
        (예: 원격 데스크톱이나 CCTV 접속)
    
    ### **왜 사설 IP를 사용할까?**

- IPv4 주소 부족 문제 해결
- 내부 네트워크 보안 강화
- 비용 절감 (공인 IP 하나만 사용)