
## WSABUF
`WSABUF`는 **수신 버퍼를 위한 구조체**로, 길이와 포인터를 포함합니다.
```
typedef struct {
    DWORD len;     // 버퍼 크기
    char* buf;     // 수신 데이터가 저장될 버퍼
} WSABUF;
```

---
### WSAOVERLAPPED
`WSAOVERLAPPED` 구조체는 Windows에서 **비동기 소켓 I/O** 작업을 처리하는 데 사용되는 구조체입니다. 주로 `WSARecv()`, `WSASend()`, `ConnectEx()`, `AcceptEx()`와 같은 비동기 소켓 함수에서 사용됩니다. 이 구조체는 비동기 I/O 작업이 완료될 때 상태를 추적하고, **I/O 완료 포트 (IOCP)**와 결합하여 효율적인 비동기 처리를 가능하게 합니다.

<u>`LPWSAOVERLAPPED` 구조체는 비동기 작업을 수행하기 전에 반드시 초기화</u>

```
typedef struct _WSAOVERLAPPED {
    ULONG Internal;             // 내부 사용
    ULONG InternalHigh;         // 내부 사용
    union {
        struct {
            DWORD Offset;
            DWORD OffsetHigh;
        };
        PVOID Pointer;
    };
    HANDLE hEvent;             // 완료 시 알림을 받을 이벤트 핸들
} WSAOVERLAPPED, *LPWSAOVERLAPPED;
```

---
### WSARecv
`WSARecv`는 **Windows Sockets API (Winsock)**에서 비동기적으로 데이터를 수신하는 함수입니다. 이 함수는 TCP 연결을 통해 데이터를 수신할 때 주로 사용됩니다. 특히 **비동기 I/O 작업**을 지원하여 프로그램이 다른 작업을 동시에 수행할 수 있게 합니다.
```
int WSARecv(
  SOCKET            s,                    // 소켓 핸들
  LPWSABUF          lpBuffers,            // 수신 버퍼
  DWORD             dwBufferCount,        // 버퍼 개수
  LPDWORD           lpNumberOfBytesRecvd, // 수신된 바이트 수
  LPDWORD           lpFlags,              // 비동기 옵션
  LPWSAOVERLAPPED   lpOverlapped,         // 비동기 작업을 위한 오버랩 구조체
  LPVOID            lpCompletionRoutine   // 완료 시 호출되는 함수
);
```

#### 반환 값

- **성공 시**: 0을 반환합니다.
    
- **실패 시**: `SOCKET_ERROR`를 반환하고, 오류 코드가 **`WSAGetLastError()`**를 통해 확인할 수 있습니다. 이때, `WSA_IO_PENDING` 오류 코드는 비동기 작업이 진행 중임을 의미합니다.